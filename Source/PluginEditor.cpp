/*
  ==============================================================================

    This file was auto-generated by the Introjucer!

    It contains the basic startup code for a Juce application.

  ==============================================================================
*/

#include "PluginProcessor.h"
#include "PluginEditor.h"
#include "CustomLookAndFeel.h"


//==============================================================================
ChuckRacksAudioProcessorEditor::ChuckRacksAudioProcessorEditor (ChuckRacksAudioProcessor* ownerFilter)
: AudioProcessorEditor (ownerFilter)
{
    LookAndFeel::setDefaultLookAndFeel(new CustomLookAndFeel());
    
    // This is where our plugin's editor size is set.
    setSize (600, 700);
    
    addAndMakeVisible(managerUI=new FileContainerManagerUI(getProcessor()->getFileContainerManagerModel()));
    managerUI->setBounds(0,40, getWidth(), getHeight()-40);
    managerUI->init();
    
    addAllShredsButton = new DrawableButton("Add All Shreds", DrawableButton::ButtonStyle::ImageFitted);
    ScopedPointer<XmlElement> addAllShredSVGUp(XmlDocument::parse(BinaryData::addshrediconUp_svg));
    ScopedPointer<XmlElement> addAllShredSVGDown(XmlDocument::parse(BinaryData::addshrediconDown_svg));
    
    addAllShredsButton->setImages(Drawable::createFromSVG(*addAllShredSVGUp), Drawable::createFromSVG(*addAllShredSVGUp), Drawable::createFromSVG(*addAllShredSVGDown));
    addAndMakeVisible(addAllShredsButton);
    addAllShredsButton->setBounds(2, 4, 32,32);
    addAllShredsButton->addListener(this);
    
    removeAllShredsButton = new DrawableButton("Remove All Shreds", DrawableButton::ButtonStyle::ImageFitted);
    ScopedPointer<XmlElement> removeAllShredSVGUp(XmlDocument::parse(BinaryData::removeAllShredUp_svg));
    ScopedPointer<XmlElement> removeAllShredSVGDown(XmlDocument::parse(BinaryData::removeAllShredDown_svg));
    removeAllShredsButton->setImages(Drawable::createFromSVG(*removeAllShredSVGUp), Drawable::createFromSVG(*removeAllShredSVGUp), Drawable::createFromSVG(*removeAllShredSVGDown));
    addAndMakeVisible(removeAllShredsButton);
    removeAllShredsButton->setBounds(40, 4, 32,32);
    removeAllShredsButton->addListener(this);
    
    addNewFileContainerButton = new DrawableButton("Add Code Editor", DrawableButton::ButtonStyle::ImageFitted);
    ScopedPointer<XmlElement> addFileContainerSVGUp(XmlDocument::parse(BinaryData::addcodeeditorUp_svg));
    ScopedPointer<XmlElement> addFileContainerSVGDown(XmlDocument::parse(BinaryData::addcodeeditorDown_svg));
    addNewFileContainerButton->setImages(Drawable::createFromSVG(*addFileContainerSVGUp), Drawable::createFromSVG(*addFileContainerSVGUp), Drawable::createFromSVG(*addFileContainerSVGDown));
    addAndMakeVisible(addNewFileContainerButton);
    addNewFileContainerButton->setBounds(78, 4, 32, 32);
    addNewFileContainerButton->addListener(this);
    //lastFileLoaded=getProcessor()->fileManager.fileName;
    
    startTimer(50);
    timerCallback();
}

ChuckRacksAudioProcessorEditor::~ChuckRacksAudioProcessorEditor()
{
}

//==============================================================================
void ChuckRacksAudioProcessorEditor::paint (Graphics& g)
{
    g.fillAll (Colour(38, 40, 49));
    //g.fillAll(Colour(238, 238, 238));

}

void ChuckRacksAudioProcessorEditor::resized()
{
    
}

void ChuckRacksAudioProcessorEditor::buttonClicked(Button *buttonThatWasPressed)
{
    if (buttonThatWasPressed==addAllShredsButton)
    {
        DBG("Add all shreds button pressed");
        getProcessor()->getFileContainerManagerModel()->addAllShreds();
    }
    
    if (buttonThatWasPressed==removeAllShredsButton)
    {
        getProcessor()->getFileContainerManagerModel()->removeAllShreds();
    }
    
    if (buttonThatWasPressed==addNewFileContainerButton)
    {
        getProcessor()->getFileContainerManagerModel()->addFileContainer();
        managerUI->addNewFileContainerUI(getProcessor()->getFileContainerManagerModel()->fileContainerModels.back());
    }
        
    
    
    //if (buttonThatWasPressed==browseCodeButton) {
    //    getProcessor()->fileManager.openBrowser();
    //    lastFileLoaded=getProcessor()->fileManager.fileName;
    //}
}

void ChuckRacksAudioProcessorEditor::timerCallback()
{
    
}

void ChuckRacksAudioProcessorEditor::sliderValueChanged (Slider* slider)
{
    
}
